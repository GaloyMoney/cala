{
  "db_name": "PostgreSQL",
  "query": "\n            INSERT INTO cala_current_balances (\n                journal_id, account_id, currency, latest_version, latest_values\n            )\n            SELECT * FROM UNNEST(\n                $1::uuid[],\n                $2::uuid[],\n                $3::text[],\n                $4::int4[],\n                $5::jsonb[]\n            )\n            ON CONFLICT (account_id, journal_id, currency)\n            DO UPDATE SET\n                latest_version = GREATEST(cala_current_balances.latest_version, EXCLUDED.latest_version),\n                latest_values = CASE\n                    WHEN cala_current_balances.latest_version < EXCLUDED.latest_version\n                    THEN EXCLUDED.latest_values\n                    ELSE cala_current_balances.latest_values\n                END\n            ",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "UuidArray",
        "UuidArray",
        "TextArray",
        "Int4Array",
        "JsonbArray"
      ]
    },
    "nullable": []
  },
  "hash": "96729d6d53e4758023134b437d769dd5073fdb0c26ddd69ce330b5c2b0fc8d76"
}
